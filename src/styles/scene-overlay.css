/* Scene Overlay Styles for Wizard's Choice */

/* 
 * This file contains styles for the overlay elements that display
 * player and enemy stats directly in the 3D scene
 */

/* Reset box model to ensure consistent layout */
* {
    box-sizing: border-box !important;
}

/* Force all body and html elements to have no margin/padding */
html, body {
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    height: 100% !important;
    background-color: rgba(10, 10, 30, 1) !important;
}

/* Game container */
html body .game-container {
    width: 100vw !important;
    height: 100vh !important;
    overflow: hidden !important;
    background-color: rgba(10, 10, 30, 1) !important;
    margin: 0 !important;
    padding: 0 !important;
    display: flex !important;
    flex-direction: column !important;
}

/* Main container with full-screen layout */
html body #game-ui.scene-integrated {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    height: 100% !important;
    overflow: hidden !important;
    padding: 0 !important;
    margin: 0 !important;
    background-color: rgba(10, 10, 30, 1) !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    border: none !important;
    z-index: 10 !important;
}

/* Battle container with proper flex layout */
html body #battle-container {
    position: relative !important;
    width: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    flex: 1 1 auto !important;
    min-height: 0 !important; /* Critical for flex child to prevent overflow */
    background-color: rgba(10, 10, 30, 1) !important;
    overflow: hidden !important;
}

/* Canvas should take all available space */
html body #battle-scene {
    flex: 1 1 auto !important;
    min-height: 0 !important; /* Critical for flex child to prevent overflow */
    background-color: rgba(10, 10, 30, 1) !important;
    position: relative !important;
    z-index: 1 !important;
}

/* Ensure ThreeJS renderer takes full space in battle scene */
#battle-scene > canvas {
    display: block !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
}

/* Canvas element itself needs to be positioned correctly */
html body #battle-scene canvas {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
}

/* Spell container as floating overlay at the bottom */
html body #spell-container {
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    width: 100% !important;
    background-color: transparent !important;
    z-index: 900 !important;
    pointer-events: auto !important;
    padding-bottom: 30px !important; /* Add padding at bottom */
}

/* Stats overlay containers */
.stats-overlay {
    position: absolute !important;
    z-index: 999 !important;
    pointer-events: none !important;
    color: white !important;
    text-shadow: 0 0 5px black, 0 0 3px black !important;
    font-weight: bold !important;
    background-color: rgba(0, 0, 0, 0.5) !important;
    border-radius: 10px !important;
    padding: 10px !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5) !important;
}

/* Player stats overlay in top left */
#player-stats-overlay {
    top: 20px !important;
    left: 20px !important;
    width: 250px !important;
    z-index: 9999 !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    background-color: rgba(0, 0, 0, 0.7) !important;
    border: 2px solid rgba(255, 204, 0, 0.5) !important;
    box-shadow: 0 0 15px rgba(255, 204, 0, 0.3) !important;
}

/* Enemy stats overlay in top right */
#enemy-stats-overlay {
    top: 20px !important;
    right: 20px !important;
    width: 220px !important;
    z-index: 1000 !important;
}

/* Battle info overlay at the top center */
#battle-info-overlay {
    top: 20px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: 300px !important;
    text-align: center !important;
    z-index: 1000 !important;
    background-color: rgba(0, 0, 0, 0.7) !important;
    border: 1px solid rgba(100, 100, 255, 0.4) !important;
    font-size: 16px !important;
    box-shadow: 0 0 20px rgba(0, 0, 100, 0.3) !important;
    padding: 10px 15px !important;
}

/* Hide old UI elements */
#player-info, 
#opponent-info, 
#battle-info {
    display: none !important;
    visibility: hidden !important;
    width: 0 !important;
    height: 0 !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* Style for the stat bars */
.overlay-stat {
    margin-bottom: 8px !important;
}

.overlay-stat-label {
    display: flex !important;
    justify-content: space-between !important;
    margin-bottom: 3px !important;
    font-size: 14px !important;
}

.overlay-bar {
    height: 20px !important;
    background-color: rgba(0, 0, 0, 0.5) !important;
    border-radius: 10px !important;
    overflow: hidden !important;
    position: relative !important;
    border: 1px solid #444 !important;
    margin-top: 5px !important;
}

.overlay-bar-fill {
    height: 100% !important;
    transition: width 0.3s ease !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
}

.overlay-health-fill {
    background: linear-gradient(to right, #ff3030, #ff5050) !important;
}

.overlay-mana-fill {
    background: linear-gradient(to right, #3030ff, #5050ff) !important;
}

.overlay-exp-fill {
    background: linear-gradient(to right, #ffcc00, #ffd700) !important;
    box-shadow: 0 0 5px rgba(255, 204, 0, 0.7) !important;
    height: 20px !important;
    border-radius: 10px !important;
    display: block !important;
    position: relative !important;
}

/* Remove the XP label from inside the bar */
.overlay-exp-fill::after {
    content: '' !important;
}

/* Player name and level */
.overlay-name {
    font-size: 16px !important;
    margin-bottom: 5px !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    color: #ffcc00 !important;
    text-shadow: 0 0 3px rgba(255, 204, 0, 0.5) !important;
}

#player-level {
    font-weight: bold !important;
    background-color: rgba(255, 204, 0, 0.2) !important;
    border-radius: 50% !important;
    padding: 0 5px !important;
    margin-left: 3px !important;
    box-shadow: 0 0 4px rgba(255, 204, 0, 0.4) !important;
    color: #ffcc00 !important;
    font-size: 18px !important;
}

/* Make XP text more visible */
#player-exp-text {
    font-weight: bold !important;
    color: #ffcc00 !important;
}

#exp-current-value, #exp-next-value {
    font-weight: bold !important;
    color: #ffffff !important;
}

/* Spell choices container */
#spell-choices {
    display: flex !important;
    flex-direction: column !important; 
    align-items: center !important;
    width: 100% !important;
    padding: 0 !important;
    height: auto !important;
    pointer-events: auto !important; /* Changed to auto to allow click events */
}

/* Add specific styles for spells-header to be more visible on the overlay */
.spells-header {
    margin: 0 0 15px 0 !important;
    padding: 5px 15px !important;
    font-size: 16px !important;
    background-color: rgba(20, 20, 60, 0.9) !important;
    border-radius: 20px !important;
    color: #ffffff !important;
    text-shadow: 0 0 5px #000000 !important;
    width: auto !important;
    display: inline-block !important;
    border: 1px solid rgba(100, 100, 255, 0.6) !important;
    box-shadow: 0 0 10px rgba(50, 50, 255, 0.3) !important;
    position: relative !important;
    z-index: 960 !important;
}

/* Update spell list to be properly positioned */
.spells-list {
    display: flex !important;
    flex-wrap: wrap !important; 
    justify-content: center !important;
    gap: 10px !important;
    padding: 10px !important;
    margin: 0 !important;
    width: 100% !important;
    overflow-y: visible !important;
    max-height: none !important;
    position: relative !important; /* Changed from absolute to relative for better event handling */
    bottom: 0 !important;
    z-index: 950 !important;
    pointer-events: auto !important;
}

/* Enhanced spell button styles */
.spell-button {
    position: relative !important;
    width: 170px !important;
    height: 200px !important;
    min-height: 200px !important;
    margin: 0 !important;
    background-color: rgba(20, 20, 50, 0.9) !important;
    border: 2px solid rgba(100, 100, 200, 0.7) !important;
    border-radius: 8px !important;
    color: white !important;
    text-align: center !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 0 !important;
    transition: all 0.15s ease-out !important;
    cursor: pointer !important;
    box-shadow: 0 0 15px rgba(0, 0, 100, 0.7) !important;
    overflow: hidden !important;
    pointer-events: auto !important;
    transform: translateY(0) !important;
    user-select: none !important;
}

.spell-button:hover {
    transform: translateY(-8px) !important;
    box-shadow: 0 8px 25px rgba(100, 50, 255, 0.8) !important;
    border-color: rgba(150, 150, 255, 0.9) !important;
    filter: brightness(1.1) !important;
}

.spell-button:active {
    transform: translateY(-4px) !important;
    box-shadow: 0 4px 15px rgba(80, 40, 200, 0.6) !important;
    transition: all 0.05s ease-out !important;
}

.spell-button.disabled {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
    transform: none !important;
    box-shadow: none !important;
}

.spell-header {
    width: 100% !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 5px !important;
    background-color: rgba(40, 40, 80, 0.8) !important;
    border-bottom: 1px solid rgba(100, 100, 255, 0.4) !important;
    border-radius: 6px 6px 0 0 !important;
}

.spell-name {
    font-size: 16px !important;
    font-weight: bold !important;
    margin: 0 !important;
    color: #d0d0ff !important;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.7) !important;
}

.spell-element {
    font-size: 18px !important;
    margin-right: 3px !important;
}

.spell-element-text {
    font-size: 12px !important;
    color: #a0a0ff !important;
    text-transform: capitalize !important;
    margin-left: 3px !important;
}

.spell-cost {
    font-size: 14px !important;
    color: #8080ff !important;
    font-weight: bold !important;
}

.spell-image-container {
    width: 100% !important;
    height: 80px !important;
    overflow: hidden !important;
    background-color: rgba(30, 30, 60, 0.4) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-bottom: 1px solid rgba(80, 80, 200, 0.3) !important;
}

.spell-image {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    object-position: center !important;
}

.spell-description {
    font-size: 12px !important;
    padding: 5px !important;
    margin: 0 !important;
    color: #b0b0ff !important;
    flex-grow: 1 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    height: 50px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

.spell-stats {
    width: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 2px !important;
    padding: 5px !important;
    background-color: rgba(30, 30, 60, 0.5) !important;
    border-top: 1px solid rgba(100, 100, 255, 0.4) !important;
    border-radius: 0 0 6px 6px !important;
}

/* Style spell stats text for better visibility */
.spell-damage, .spell-healing, .spell-mana {
    font-size: 14px !important;
    font-weight: bold !important;
}

.spell-damage {
    color: #ff8080 !important;
    text-shadow: 0 0 3px rgba(255, 0, 0, 0.5) !important;
}

.spell-healing {
    color: #80ff80 !important;
    text-shadow: 0 0 3px rgba(0, 255, 0, 0.5) !important;
}

.spell-mana {
    color: #8080ff !important;
    text-shadow: 0 0 3px rgba(0, 0, 255, 0.5) !important;
}

/* Battle log section */
#battle-log {
    margin-top: 10px !important;
    padding: 10px !important;
    height: 100px !important;
    overflow-y: auto !important;
    background-color: rgba(0, 0, 0, 0.3) !important;
    border-radius: 10px !important;
}

.log-entry {
    padding: 3px 0 !important;
    font-size: 14px !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
}

/* Animation for stat changes */
@keyframes pulseOverlay {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.pulse-animation {
    animation: pulseOverlay 0.3s ease !important;
}

/* Force hidden elements to be truly hidden */
.hidden {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    height: 0 !important;
    width: 0 !important;
    overflow: hidden !important;
    position: absolute !important;
    z-index: -1 !important;
}

/* Make sure the game-ui is visible when not hidden */
#game-ui:not(.hidden) {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Media queries for responsiveness - updated for overlay positioning */
@media (max-width: 768px) {
    #spell-container {
        padding-bottom: 20px !important;
    }
    
    .spell-button {
        width: 150px !important;
        height: 190px !important;
    }
    
    #player-stats-overlay, #enemy-stats-overlay {
        width: 180px !important;
    }
    
    #battle-info-overlay {
        width: 250px !important;
    }
    
    .spell-cast-text {
        bottom: 270px !important;
    }
}

@media (max-width: 480px) {    
    #spell-container {
        padding-bottom: 10px !important;
    }
    
    .spells-header {
        font-size: 14px !important;
        padding: 3px 10px !important;
    }
    
    .spell-cast-text {
        bottom: 250px !important;
        font-size: 16px !important;
    }
    
    .spell-button {
        width: 130px !important;
        height: 180px !important;
    }
    
    .spell-image-container {
        height: 60px !important;
    }
    
    .spell-description {
        height: 40px !important;
        font-size: 10px !important;
    }
    
    #player-stats-overlay {
        top: 10px !important;
        left: 10px !important;
        width: 150px !important;
    }
    
    #enemy-stats-overlay {
        top: 10px !important;
        right: 10px !important;
        width: 150px !important;
    }
    
    #battle-info-overlay {
        top: 150px !important;
        width: 200px !important;
    }
    
    .overlay-stat-label, .log-entry {
        font-size: 12px !important;
    }
}

/* Force hidden elements to be truly hidden */
.hidden-ui-element {
    position: absolute !important;
    opacity: 0 !important;
    height: 0 !important;
    width: 0 !important;
    overflow: hidden !important;
    pointer-events: none !important;
    visibility: hidden !important;
}

/* Let elements still be accessible to JavaScript while invisible to users */
.hidden-ui-element * {
    position: absolute !important;
    opacity: 0 !important;
    height: 0 !important;
    width: 0 !important;
}

/* Floating text animation for spell effects */
@keyframes floatUp {
    0% { transform: translate(-50%, 0); opacity: 0; }
    10% { opacity: 1; }
    80% { opacity: 1; }
    100% { transform: translate(-50%, -80px); opacity: 0; }
}

.floating-text {
    position: fixed !important; /* Change to fixed to ensure it's always visible */
    left: 50% !important;
    transform: translateX(-50%) !important;
    color: white !important;
    font-weight: bold !important;
    font-size: 24px !important; /* Larger font size */
    text-shadow: 0 0 8px black, 0 0 5px black, 0 0 3px black !important; /* Better shadow */
    pointer-events: none !important;
    animation: floatUp 2.5s ease-out forwards !important; /* Slightly longer animation */
    z-index: 9999 !important; /* Ensure it's above everything */
}

.damage-text {
    color: #ff3030 !important; /* Brighter red */
    text-shadow: 0 0 10px #ff0000, 0 0 5px #ff0000, 0 0 3px black !important; /* Add glow */
}

.heal-text {
    color: #30ff30 !important; /* Brighter green */
    text-shadow: 0 0 10px #00ff00, 0 0 5px #00ff00, 0 0 3px black !important; /* Add glow */
}

.mana-text {
    color: #3030ff !important; /* Brighter blue */
    text-shadow: 0 0 10px #0000ff, 0 0 5px #0000ff, 0 0 3px black !important; /* Add glow */
}

.spell-cast-text {
    position: fixed !important;
    bottom: 240px !important; /* Positioned above the spell container */
    left: 50% !important;
    transform: translateX(-50%) !important;
    color: white !important;
    background-color: rgba(0, 0, 0, 0.8) !important;
    padding: 10px 20px !important;
    border-radius: 20px !important;
    font-size: 18px !important;
    white-space: nowrap !important;
    z-index: 9999 !important;
    text-align: center !important;
    box-shadow: 0 0 15px rgba(100, 0, 255, 0.5) !important;
    border: 1px solid rgba(150, 150, 255, 0.7) !important;
    font-weight: bold !important;
    pointer-events: none !important; /* Ensure it doesn't block clicks */
}

/* Turn counter and battle info styling */
#overlay-turn-counter {
    color: #ffcc00 !important; /* Gold color for turn number */
    font-weight: bold !important;
}

#overlay-last-action {
    color: #a0a0ff !important; /* Light blue for actions */
    font-style: italic !important;
}

.spell-damage {
    font-size: 14px !important;
    color: #ff8080 !important;
    text-shadow: 0 0 3px rgba(255, 0, 0, 0.5) !important;
}

.spell-healing {
    font-size: 14px !important;
    color: #80ff80 !important;
    text-shadow: 0 0 3px rgba(0, 255, 0, 0.5) !important;
}

.spell-mana {
    font-size: 14px !important;
    color: #8080ff !important;
    text-shadow: 0 0 3px rgba(0, 0, 255, 0.5) !important;
} 